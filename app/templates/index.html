{%  import 'bootstrap/wtf.html' as wtf %}
{% block content %}
    {% for mensaje in get_flashed_messages() %}
        <div class="alert alert-success">
            <button type="button" class="close" data-dismiss="alert"> &times; </button>
            {{ mensaje }}
        </div>
    {% endfor %}

    <script>
        document.addEventListener('DOMContentLoaded', function(){
            var mensajes = document.querySelectorAll('.alert');
            mensajes.forEach(function(mensaje){
                setTimeout(function(){
                    mensaje.style.display = 'none';
                }, 3000);
            });
        });
    </script>

    <!doctype html>
    <html lang="en">
        {% include '/components/head.html' %}

    <body class="bg-dark">
        <main class="container-lg">

            <!-- HEADERS CONICIONADOS POR ROL -->
            {% if not current_user.is_authenticated or current_user.rol == 1 %}

                {% include '/components/navbar_cliente.html' %}

            {% elif current_user.is_authenticated and current_user.rol == 2 %}

                {% include '/components/navbar_cliente.html' %}
                
            {% endif %}

            <div class="row flex-nowrap justify-content-center align-items-center border-bottom border-secondary">
                <nav class="nav nav-underline justify-content-around">
                    <a class="nav-item nav-link link-light" href="#">Nuevos</a>
                    <a class="nav-item nav-link link-light" href="#">Mas populares</a>
                    <a class="nav-item nav-link link-light" href="#">Nekketsu</a>
                    <a class="nav-item nav-link link-light" href="#">Spokon</a>
                    <a class="nav-item nav-link link-light" href="#">Gekiga</a>
                    <a class="nav-item nav-link link-light" href="#">Yuri</a>
                    <a class="nav-item nav-link link-light" href="#">Yaoi</a>
                    <a class="nav-item nav-link link-light" href="#">Harem</a>
                    <a class="nav-item nav-link link-light" href="#">Mecha</a>
                    <a class="nav-item nav-link link-light" href="#">Ecchi</a>
                    <a class="nav-item nav-link link-light" href="#">Gore</a>
                </nav>
            </div>
            
            <section class="container-fluid py-3">
                <div id="carouselExampleCaptions" class="carousel slide">
                    <div class="carousel-indicators">
                    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1" aria-label="Slide 2"></button>   
                    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2" aria-label="Slide 3"></button>   
                    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="3" aria-label="Slide 4"></button>   
                    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="4" aria-label="Slide 5"></button>   
                    </div>
                    <div class="carousel-inner rounded-3">
                        <div class="carousel-item active rounded-3">
                            <img src="{{ url_for('static', filename='img/index/first_banner.svg') }}" class="d-block w-100 object-fit-cover rounded-3 carrousel__brightness--50" style="height: 30rem;">
                            <div class="carousel-caption d-none d-md-block">
                                <h5>¡Nuevas ediciones de mangas impresionantes!</h5>
                                <p>¡Oye {{ current_user.username }}! Ven y hechale un vistazo a nuestro catalogo. Seguro te va a encantar.</p>
                            </div>
                        </div>
                        {% for manga in mangas %}
                            <div class="carousel-item bg-black rounded-3">
                                <img src="mangas/images/{{ manga.image_path }}" class="d-block w-100 object-fit-contain rounded-3 carrousel__brightness--50" style="height: 30rem;">
                                <div class="carousel-caption d-none d-md-block rounded-3">
                                <h3>Nueva edición de {{ manga.title }}</h3>
                                <p>{{ manga.description }}</p>
                                <p class="text-center">
                                    <a class="link-light link-underline-opacity-0" href="#nuevo">
                                        <span class="fw-bold">Mas informacion abajo</span>
                                    <br>
                                    <i class="fs-4 bi bi-arrow-bar-down"></i>
                                    </a>
                                </p>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                    </button>
                </div>
            </section>

            <main class="container-fluid">
                <section class="container" id="nuevo">
                    <div class="py-4 text-light">
                        <h2 class="mb-3">Nuevos</h2>
                        <hr>
                        <!-- CONTENEDOR DE CARTAS -->
                        <div class="">
                            <div class="col">
                                <div class="row row-cols-lg-2 row-cols-sm-1 d-flex justify-content-between align-content-between">
                                    {% for manga in mangas %}
                                        {% if manga.status != 'Alquilado' %}
                                            <!-- CARTAS AUTOGENERADAS -->
                                            {% include '/components/index/cards/card_manga-sm.html' %}
                                        {% endif %}
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </main>
        </main>

        <!-- FOOTER DE LA PAGINA WEB -->
        {% include 'components/footer.html' %}

        <!-- BOOTSTRAP JS -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
    </body>
    </html>
{% endblock %}